// ==================================== Technicals to support weapon coatings etc. ====================================

// Condense multiple effects from Trident of the Waves
new entry "GOON_WAVE_TRIDENT_TECHNICAL"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "ExcludeFromPortraitRendering;InitiateCombat;DisablePortraitIndicator;DisableOverhead;DisableCombatlog"
data "OnApplyFunctors" "ApplyStatus(WET,100,3);GROUND:CreateSurface(2,0,Water)"

// Oil of Diminution
new entry "GOON_OIL_DIMINUTION_TECHNICAL_APPLIER"
type "StatusData"
data "StatusType" "BOOST"
// Oil of Diminution
data "DisplayName" "h359ee476gb8f5g4caegbd5bgf2b9a29f3ad0;2"
// Targets must succeed a Constitution Saving Throw or receive Disadvantage on Strength Checks and Saving Throws, as well as a [1] penalty to damage on melee attacks. 
data "Description" "h0ca79c18g3bb5g4082gb185g2f82815d7a63;1"
data "StatusPropertyFlags" "ExcludeFromPortraitRendering;InitiateCombat;DisablePortraitIndicator;DisableOverhead;DisableCombatlog"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution, 11)"
data "OnApplySuccess" "ApplyStatus(REDUCE,100,2)"
data "OnApplyFail" ""

// Oil of Bane
new entry "GOON_OIL_BANE_TECHNICAL_APPLIER"
type "StatusData"
data "StatusType" "BOOST"
// Oil of Bane
data "DisplayName" "h58787b49g9d53g4b4fg8234g7f8cefee8dab;2"
// Targets become Baned for [1] turns unless they succeed a Charisma Saving Throw.
data "Description" "hd31b5402g3f9bg4b1ag8400gbd961b0a25a0;1"
data "StatusPropertyFlags" "ExcludeFromPortraitRendering;InitiateCombat;DisablePortraitIndicator;DisableOverhead;DisableCombatlog"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution, 11)"
data "OnApplySuccess" "ApplyStatus(ALCH_OIL_BANE_CONDITION,100,2)"
data "OnApplyFail" ""

// Simple Toxin
new entry "GOON_TOXIN_SIMPLE_TECHNICAL_APPLIER"
type "StatusData"
data "StatusType" "BOOST"
// Simple Toxin
data "DisplayName" "h02524745g3faeg4540g8aecg7b5794f4c41a;2"
// Affected entity takes [1] at the end of their turn, unless it succeeds a Constitution Saving Throw.
data "Description" "h28f417e6g3ed9g495egb02fg105c2ad12208;3"
data "DescriptionParams" "DealDamage(1d4,Poison)"
data "StatusPropertyFlags" "ExcludeFromPortraitRendering;InitiateCombat;DisablePortraitIndicator;DisableOverhead;DisableCombatlog"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution, 11)"
data "OnApplySuccess" "ApplyStatus(ALCH_TOXIN_BASIC_CONDITION,100,1, AdvantageOnPoisoned())"
data "OnApplyFail" ""

// ==================================== Finesse throwing for all, to an extent ====================================

// WIP
// It's the best I can do
new entry "Goon_Finesse_Throwing_Overhaul_Passive"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostConditions" "IsDexterityGreaterThanStrength() and IsRangedUnarmedAttack() and HasWeaponProperty(WeaponProperties.Finesse)"
data "Boosts" "MonkWeaponAttackOverride()"

// ==================================== Throw overhaul ====================================

// Mine
new entry "Throw_Throw"
type "SpellData"
data "SpellType" "Throw"
using "Throw_Throw"
// data "SpellProperties" "GROUND:DealDamage(1,Bludgeoning);TARGET:IF(HasStatus('MAG_PROJECTILE_SHOES_TECHNICAL', context.HitDescription.ThrownObject)):DealDamage(2d4, Psychic,Magical,,0,,true);TARGET:IF(HasStatus('MAG_THE_THORNS_WEAPON_BOND', context.HitDescription.ThrownObject)):ApplyStatus(MAG_THE_THORNS_AOE_DAMAGE_TECHNICAL, 100, 0);TARGET:IF(HasStatus('MAG_FIRE_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Fire,Magical,,0,,true);TARGET:IF(HasStatus('MAG_COLD_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Cold,Magical,,0,,true);TARGET:IF(HasStatus('MAG_LIGHTNING_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Lightning,Magical,,0,,true);TARGET:IF(HasStatus('MAG_THUNDER_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Thunder,Magical,,0,,true);TARGET:IF(HasStatus('MAG_ACID_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Acid,Magical,,0,,true);TARGET:IF(HasStatus('MAG_POISON_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Poison,Magical,,0,,true);TARGET:IF(HasStatus('MAG_NECROTIC_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Necrotic,Magical,,0,,true);TARGET:IF(HasStatus('MAG_FORCE_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Force,Magical,,0,,true);TARGET:IF(HasStatus('MAG_PSYCHIC_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Psychic,Magical,,0,,true);TARGET:IF((HasStatus('BURNING', context.HitDescription.ThrownObject) or HasStatus('FLAMING_SPHERE_AURA', context.HitDescription.ThrownObject))):ApplyStatus(SELF, BURNING,100,1)"
data "SpellProperties" "GROUND:DealDamage(1,Bludgeoning);TARGET:IF(SlingShoesThrow()):DealDamage(2d4,Psychic,Magical,,0,,true);TARGET:IF(NyrulnaThrow()):ApplyStatus(MAG_THE_THORNS_AOE_DAMAGE_TECHNICAL,100,0);TARGET:IF(d4FireThrow()):DealDamage(1d4,Fire,,,0,,true);TARGET:IF(d4ColdThrow()):DealDamage(1d4,Cold,,,0,,true);TARGET:IF(d4LightningThrow()):DealDamage(1d4,Lightning,,,0,,true);TARGET:IF(d4ThunderThrow()):DealDamage(1d4,Thunder,,,0,,true);TARGET:IF(d4AcidThrow()):DealDamage(1d4,Acid,,,0,,true);TARGET:IF(d4PoisThrow()):DealDamage(1d4,Poison,,,0,,true);TARGET:IF(d4NecroticThrow()):DealDamage(1d4,Necrotic);TARGET:IF(d4ForceThrow()):DealDamage(1d4,Force,,,0,,true);TARGET:IF(d4PsychicThrow()):DealDamage(1d4,Psychic,,,0,,true);TARGET:IF(BurnThrow()):ApplyStatus(SELF,BURNING,100,1);TARGET:IF(d4RadiantThrow()):DealDamage(1d4,Radiant,,,0,,true);TARGET:IF(d8RadiantThrow()):DealDamage(1d8,Radiant,,,0,,true);TARGET:IF(d8ThunderThrow()):DealDamage(1d8,Thunder,,,0,,true);TARGET:IF(d6ForceThrow()):DealDamage(1d6,Force,,,0,,true);TARGET:IF(d6PoisThrow()):DealDamage(1d6,Poison,,,0,,true);TARGET:IF(d8PoisThrow()):DealDamage(1d8,Poison,,,0,,true);TARGET:IF(d10PoisThrow()):DealDamage(1d10,Poison,,,0,,true);TARGET:IF(BPoisThrow()):ApplyStatus(POISON_SIMPLE_TECHNICAL_APPLIER,100,0);TARGET:IF(DPoisThrow()):ApplyStatus(POISON_DROW_TECHNICAL_APPLIER,100,0);TARGET:IF(CMPoisThrow()):ApplyStatus(POISON_CRAWLER_MUCUS_TECHNICAL_APPLIER,100,0);TARGET:IF(MPoisThrow()):ApplyStatus(POISON_MALICE_TECHNICAL_APPLIER,100,0);TARGET:IF(BGPoisThrow()):ApplyStatus(UNI_POISON_BREWER_TECHNICAL_APPLIER,100,0);TARGET:IF(SToxThrow()):ApplyStatus(GOON_TOXIN_SIMPLE_TECHNICAL_APPLIER,100,0);TARGET:IF(FOilThrow()):ApplyStatus(MAG_FROST,100,2)"
// data "SpellSuccess" "TARGET:IF(IsLightThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(1,Bludgeoning);TARGET:IF(IsMediumThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(1d4,Bludgeoning);TARGET:IF(IsHeavyThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(2d4,Bludgeoning);TARGET:IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject)):DealDamage(ThrownWeapon, ThrownWeaponDamageType);TARGET:IF(HasWeightGreaterThan(context.Target.Weight/2, context.HitDescription.ThrownObject)):Force(2);TARGET:IF(HasWeightGreaterThan(context.Target.Weight, context.HitDescription.ThrownObject)):ApplyStatus(PRONE,100,1);TARGET:IF(Tagged('BOO',context.HitDescription.ThrownObject)):ApplyStatus(BLINDED,100,1,,,,not SavingThrow(Ability.Dexterity, 15));TARGET:IF(Tagged('DWARF', context.Source) and HasStatus('MAG_DWARVEN_THROWER_TECHNICAL', context.HitDescription.ThrownObject) and not SizeEqualOrGreater(Size.Large)):DealDamage(1d8, Bludgeoning,Magical,,0,,true);TARGET:IF(Tagged('DWARF', context.Source) and HasStatus('MAG_DWARVEN_THROWER_TECHNICAL', context.HitDescription.ThrownObject) and SizeEqualOrGreater(Size.Large)):DealDamage(2d8, Bludgeoning,Magical,,0,,true);IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject) and HasStatus('HUNTERS_MARK',context.Target,context.Source)):DealDamage(1d6, ThrownWeaponDamageType,Magical,,0,,true)"
data "SpellSuccess" "TARGET:IF(IsLightThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(1,Bludgeoning);TARGET:IF(IsMediumThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(1d4,Bludgeoning);TARGET:IF(IsHeavyThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(2d4,Bludgeoning);TARGET:IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject)):DealDamage(ThrownWeapon,ThrownWeaponDamageType);TARGET:IF(HasWeightGreaterThan(context.Target.Weight/2,context.HitDescription.ThrownObject)):Force(2);TARGET:IF(HasWeightGreaterThan(context.Target.Weight,context.HitDescription.ThrownObject)):ApplyStatus(PRONE,100,1);TARGET:IF(Tagged('BOO',context.HitDescription.ThrownObject)):ApplyStatus(BLINDED,100,1,,,,not SavingThrow(Ability.Dexterity,15));TARGET:IF(IsDwarf() and IsDwarvenThrower() and not SizeEqualOrGreater(Size.Large)):DealDamage(1d8,Bludgeoning);TARGET:IF(IsDwarf() and IsDwarvenThrower() and SizeEqualOrGreater(Size.Large)):DealDamage(2d8,Bludgeoning);IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject) and HasStatus('HUNTERS_MARK',context.Target,context.Source)):DealDamage(1d6,ThrownWeaponDamageType);TARGET:IF(HasPassive('MAG_LC_Wave_Trident_Passive',context.HitDescription.ThrownObject)):ApplyStatus(GOON_WAVE_TRIDENT_TECHNICAL,100,0);TARGET:IF(AOilThrow()):ApplyStatus(ALCH_OIL_REMOVERESISTANCEFIRE_CONDITION,100,2);TARGET:IF(BOilThrow()):ApplyStatus(GOON_OIL_BANE_TECHNICAL_APPLIER,100,0);TARGET:IF(DSOilThrow()):DealDamage(1,ThrownWeaponDamageType,,,0,,true);TARGET:IF(DOilThrow()):ApplyStatus(GOON_OIL_DIMINUTION_TECHNICAL_APPLIER,100,0);TARGET:IF(COilThrow()):ApplyStatus(ALCH_OIL_COMBUSTION_CONDITION,100,2);TARGET:IF(WBOilThrow()):ApplyStatus(ALCH_OIL_WIZARDSBANE_CONDITION,100,2)"
// Vanilla: data "Trajectories" "rules:861d0046-1858-401e-b97b-28f7b3e3e89a,d5e54f29-f80f-4105-96b2-23b5af9321c7,bac38aab-dfa7-4a5a-9c2a-552b0b626ee3"
// Other ranged weapons: data "Trajectories" "ff93ba9c-124c-454e-ac8c-436c136bcef2,75d615be-9277-6e22-6c17-fa51981d7560,8c00238b-549d-dc71-8fcb-42ba68bae142"

new entry "Throw_FrenziedThrow"
type "SpellData"
data "SpellType" "Throw"
using "Throw_FrenziedThrow"
// data "SpellProperties" "GROUND:DealDamage(1,Bludgeoning);TARGET:IF(HasStatus('MAG_THE_THORNS_WEAPON_BOND', context.HitDescription.ThrownObject)):ApplyStatus(MAG_THE_THORNS_AOE_DAMAGE_TECHNICAL, 100, 0);TARGET:IF(HasStatus('MAG_FIRE_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Fire,Magical,,0,,true);TARGET:IF(HasStatus('MAG_COLD_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Cold,Magical,,0,,true);TARGET:IF(HasStatus('MAG_LIGHTNING_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Lightning,Magical,,0,,true);TARGET:IF(HasStatus('MAG_THUNDER_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Thunder,Magical,,0,,true);TARGET:IF(HasStatus('MAG_ACID_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Acid,Magical,,0,,true);TARGET:IF(HasStatus('MAG_POISON_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Poison,Magical,,0,,true);TARGET:IF(HasStatus('MAG_NECROTIC_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Necrotic,Magical,,0,,true);TARGET:IF(HasStatus('MAG_FORCE_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Force,Magical,,0,,true);TARGET:IF(HasStatus('MAG_PSYCHIC_THROW', context.HitDescription.ThrownObject)):DealDamage(1d4, Psychic,Magical,,0,,true);TARGET:IF((HasStatus('BURNING', context.HitDescription.ThrownObject) or HasStatus('FLAMING_SPHERE_AURA', context.HitDescription.ThrownObject))):ApplyStatus(SELF, BURNING,100,1)"
data "SpellProperties" "GROUND:DealDamage(1,Bludgeoning);TARGET:IF(SlingShoesThrow()):DealDamage(2d4,Psychic,Magical,,0,,true);TARGET:IF(NyrulnaThrow()):ApplyStatus(MAG_THE_THORNS_AOE_DAMAGE_TECHNICAL,100,0);TARGET:IF(d4FireThrow()):DealDamage(1d4,Fire,,,0,,true);TARGET:IF(d4ColdThrow()):DealDamage(1d4,Cold,,,0,,true);TARGET:IF(d4LightningThrow()):DealDamage(1d4,Lightning,,,0,,true);TARGET:IF(d4ThunderThrow()):DealDamage(1d4,Thunder,,,0,,true);TARGET:IF(d4AcidThrow()):DealDamage(1d4,Acid,,,0,,true);TARGET:IF(d4PoisThrow()):DealDamage(1d4,Poison,,,0,,true);TARGET:IF(d4NecroticThrow()):DealDamage(1d4,Necrotic);TARGET:IF(d4ForceThrow()):DealDamage(1d4,Force,,,0,,true);TARGET:IF(d4PsychicThrow()):DealDamage(1d4,Psychic,,,0,,true);TARGET:IF(BurnThrow()):ApplyStatus(SELF,BURNING,100,1);TARGET:IF(d4RadiantThrow()):DealDamage(1d4,Radiant,,,0,,true);TARGET:IF(d8RadiantThrow()):DealDamage(1d8,Radiant,,,0,,true);TARGET:IF(d8ThunderThrow()):DealDamage(1d8,Thunder,,,0,,true);TARGET:IF(d6ForceThrow()):DealDamage(1d6,Force,,,0,,true);TARGET:IF(d6PoisThrow()):DealDamage(1d6,Poison,,,0,,true);TARGET:IF(d8PoisThrow()):DealDamage(1d8,Poison,,,0,,true);TARGET:IF(d10PoisThrow()):DealDamage(1d10,Poison,,,0,,true);TARGET:IF(BPoisThrow()):ApplyStatus(POISON_SIMPLE_TECHNICAL_APPLIER,100,0);TARGET:IF(DPoisThrow()):ApplyStatus(POISON_DROW_TECHNICAL_APPLIER,100,0);TARGET:IF(CMPoisThrow()):ApplyStatus(POISON_CRAWLER_MUCUS_TECHNICAL_APPLIER,100,0);TARGET:IF(MPoisThrow()):ApplyStatus(POISON_MALICE_TECHNICAL_APPLIER,100,0);TARGET:IF(BGPoisThrow()):ApplyStatus(UNI_POISON_BREWER_TECHNICAL_APPLIER,100,0);TARGET:IF(SToxThrow()):ApplyStatus(GOON_TOXIN_SIMPLE_TECHNICAL_APPLIER,100,0);TARGET:IF(FOilThrow()):ApplyStatus(MAG_FROST,100,2)"
// data "SpellSuccess" "TARGET:IF(IsLightThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(1+StrengthModifier,Bludgeoning);IF(IsMediumThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(1d4+StrengthModifier,Bludgeoning);TARGET:IF(IsHeavyThrownObject(context.HitDescription.ThrownObject, false)):DealDamage(2d4+StrengthModifier,Bludgeoning);TARGET:IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject)):DealDamage(ThrownWeapon+StrengthModifier, ThrownWeaponDamageType);TARGET:IF(HasWeightGreaterThan(context.Target.Weight/2, context.HitDescription.ThrownObject)):Force(2);TARGET:IF(HasWeightGreaterThan(context.Target.Weight, context.HitDescription.ThrownObject)):ApplyStatus(PRONE,100,1);ApplyStatus(PRONE,100,1);IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject) and HasStatus('HUNTERS_MARK',context.Target,context.Source)):DealDamage(1d6, ThrownWeaponDamageType,Magical,,0,,true);TARGET:IF(Tagged('DWARF', context.Source) and HasStatus('MAG_DWARVEN_THROWER_TECHNICAL', context.HitDescription.ThrownObject) and not SizeEqualOrGreater(Size.Large)):DealDamage(1d8, Bludgeoning,Magical,,0,,true);TARGET:IF(Tagged('DWARF', context.Source) and HasStatus('MAG_DWARVEN_THROWER_TECHNICAL', context.HitDescription.ThrownObject) and SizeEqualOrGreater(Size.Large)):DealDamage(2d8, Bludgeoning,Magical,,0,,true)"
data "SpellSuccess" "TARGET:IF(IsLightThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(1+StrengthModifier,Bludgeoning);TARGET:IF(IsMediumThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(1d4+StrengthModifier,Bludgeoning);TARGET:IF(IsHeavyThrownObject(context.HitDescription.ThrownObject,false)):DealDamage(2d4+StrengthModifier,Bludgeoning);TARGET:IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject)):DealDamage(ThrownWeapon+StrengthModifier,ThrownWeaponDamageType);TARGET:IF(HasWeightGreaterThan(context.Target.Weight/2,context.HitDescription.ThrownObject)):Force(2);TARGET:IF(HasWeightGreaterThan(context.Target.Weight,context.HitDescription.ThrownObject)):ApplyStatus(PRONE,100,1);TARGET:IF(Tagged('BOO',context.HitDescription.ThrownObject)):ApplyStatus(BLINDED,100,1,,,,not SavingThrow(Ability.Dexterity,15));TARGET:IF(IsDwarf(context.Source) and IsDwarvenThrower() and not SizeEqualOrGreater(Size.Large)):DealDamage(1d8,Bludgeoning,,,0,,true);TARGET:IF(IsDwarf() and IsDwarvenThrower() and SizeEqualOrGreater(Size.Large)):DealDamage(2d8,Bludgeoning,,,0,,true);IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject) and HasStatus('HUNTERS_MARK',context.Target,context.Source)):DealDamage(1d6,ThrownWeaponDamageType,,,0,,true);TARGET:IF(HasPassive('MAG_LC_Wave_Trident_Passive',context.HitDescription.ThrownObject)):ApplyStatus(GOON_WAVE_TRIDENT_TECHNICAL,100,0);TARGET:IF(AOilThrow()):ApplyStatus(ALCH_OIL_REMOVERESISTANCEFIRE_CONDITION,100,2);TARGET:IF(BOilThrow()):ApplyStatus(GOON_OIL_BANE_TECHNICAL_APPLIER,100,0);TARGET:IF(DSOilThrow()):DealDamage(1,ThrownWeaponDamageType,,,0,,true);TARGET:IF(DOilThrow()):ApplyStatus(GOON_OIL_DIMINUTION_TECHNICAL_APPLIER,100,0);TARGET:IF(COilThrow()):ApplyStatus(ALCH_OIL_COMBUSTION_CONDITION,100,2);TARGET:IF(WBOilThrow()):ApplyStatus(ALCH_OIL_WIZARDSBANE_CONDITION,100,2)"